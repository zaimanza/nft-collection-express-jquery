<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../../components/head'); %>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="">


  <main>
    <div class="">
      <label class="" for="title">
        Title
      </label>
      <input id="title" name="title" value="<%= collectionData.title %>" type="text" placeholder="Title" class="">
    </div>
    <div class="">
      <label class="" for="description">
        Description
      </label>
      <input id="description" name="description" value="<%= collectionData.description %>" type="text" placeholder="Description" class="">
    </div>
    <div class="">
      <label class="" for="image">
        Image url
      </label>
      <input id="image" name="image" value="<%= collectionData.image %>" type="text" placeholder="Image url" class="">
    </div>
    <div class="">
      <div class="">
        <a href="/add_metadata" class="" type="button">
          Add Metadata
        </a>
      </div>
    </div>
    <table class="">
      <thead>
        <tr>
          <th class="">Trait type</th>
          <th class="">Value</th>
          <th class="">Display type</th>
        </tr>
      </thead>
      <tbody class="">
        <% for (var i =1; i <=metadatas.length;  i++ ) { %>
        <tr>
          <td class=""><%= metadatas[i-1].trait_type %></td>
          <td class=""><%= metadatas[i-1].value %></td>
          <td class=""><%= metadatas[i-1].display_type %></td>
        </tr>
        <% } %>
      </tbody>
    </table>
    <div class="">
      <div id="logout_button" name="logout_button" class="" type="button">
        Logout
      </div>
    </div>
  </main>
  <script>
    const logout_button = document.querySelector('#logout_button')

    logout_button.addEventListener('click', async (e) => {
      const returnData = await $.ajax("/controller/user_logout", {
        type: 'post', // http method
        data: {}, // data to submit
        success: function(data, status, xhr) {},
        error: function(jqXhr, textStatus, errorMessage) {
          $('p').append('Error: ' + errorMessage);
        }
      })
      if (returnData) {
        window.location.href = "/login";
      } else {
        alert("There was an error in logout.");
      }
    });
  </script>
</body>

</html>
<!-- href="/controllers/loginController" -->